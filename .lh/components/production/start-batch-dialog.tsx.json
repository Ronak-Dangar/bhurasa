{
    "sourceFile": "components/production/start-batch-dialog.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1763361124619,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1763361124619,
            "name": "Commit-0",
            "content": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { createProductionBatch } from \"@/app/actions/production\";\r\n\r\ninterface StartBatchDialogProps {\r\n  onClose: () => void;\r\n  onSuccess: () => void;\r\n}\r\n\r\nexport function StartBatchDialog({ onClose, onSuccess }: StartBatchDialogProps) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    const formData = new FormData(e.currentTarget);\r\n    const result = await createProductionBatch(formData);\r\n\r\n    if (result.success) {\r\n      onSuccess();\r\n    } else {\r\n      setError(result.error || \"Failed to create batch\");\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\r\n      <div className=\"w-full max-w-md rounded-lg bg-white p-6 shadow-xl dark:bg-zinc-900\">\r\n        <h3 className=\"text-lg font-semibold text-zinc-900 dark:text-zinc-100\">\r\n          Start New Production Batch\r\n        </h3>\r\n        <p className=\"mt-1 text-sm text-zinc-500 dark:text-zinc-400\">\r\n          Create a new batch that will start in Phase 1 (De-husking).\r\n        </p>\r\n\r\n        <form onSubmit={handleSubmit} className=\"mt-6 space-y-4\">\r\n          {error && (\r\n            <div className=\"rounded-lg bg-rose-50 p-3 text-sm text-rose-700 dark:bg-rose-900/20 dark:text-rose-400\">\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          <div>\r\n            <label\r\n              htmlFor=\"batch_code\"\r\n              className=\"block text-sm font-medium text-zinc-900 dark:text-zinc-100\"\r\n            >\r\n              Batch Code *\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"batch_code\"\r\n              name=\"batch_code\"\r\n              required\r\n              placeholder=\"e.g., batch-25a\"\r\n              className=\"mt-1 w-full rounded-lg border border-zinc-300 bg-white px-3 py-2 text-sm text-zinc-900 shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-200 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-100\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label\r\n              htmlFor=\"farmer_name\"\r\n              className=\"block text-sm font-medium text-zinc-900 dark:text-zinc-100\"\r\n            >\r\n              Farmer Name\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"farmer_name\"\r\n              name=\"farmer_name\"\r\n              placeholder=\"e.g., Aravind Farms\"\r\n              className=\"mt-1 w-full rounded-lg border border-zinc-300 bg-white px-3 py-2 text-sm text-zinc-900 shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-200 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-100\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label\r\n              htmlFor=\"batch_date\"\r\n              className=\"block text-sm font-medium text-zinc-900 dark:text-zinc-100\"\r\n            >\r\n              Batch Date *\r\n            </label>\r\n            <input\r\n              type=\"date\"\r\n              id=\"batch_date\"\r\n              name=\"batch_date\"\r\n              required\r\n              defaultValue={new Date().toISOString().split(\"T\")[0]}\r\n              className=\"mt-1 w-full rounded-lg border border-zinc-300 bg-white px-3 py-2 text-sm text-zinc-900 shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-200 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-100\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-3 pt-4\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              disabled={loading}\r\n              className=\"rounded-lg px-4 py-2 text-sm font-medium text-zinc-700 hover:bg-zinc-100 dark:text-zinc-300 dark:hover:bg-zinc-800\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"rounded-lg bg-emerald-600 px-4 py-2 text-sm font-semibold text-white hover:bg-emerald-500 disabled:opacity-50\"\r\n            >\r\n              {loading ? \"Creating...\" : \"Start Batch\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
        }
    ]
}