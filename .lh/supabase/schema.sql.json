{
    "sourceFile": "supabase/schema.sql",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1763069565219,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1763136497284,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,8 +11,10 @@\n   'refill_due'\r\n );\r\n create type order_status as enum ('pending', 'processing', 'out_for_delivery', 'delivered');\r\n create type payment_status as enum ('cod', 'prepaid');\r\n+create type expense_status as enum ('paid', 'unpaid');\r\n+create type loan_transaction_type as enum ('payment', 'interest');\r\n \r\n create table if not exists public.profiles (\r\n   id uuid primary key references auth.users on delete cascade,\r\n   full_name text,\r\n@@ -110,12 +112,32 @@\n   id uuid primary key default gen_random_uuid(),\r\n   expense_type text not null check (expense_type in ('purchase_groundnuts', 'transport', 'labor', 'maintenance', 'utilities')),\r\n   amount numeric not null,\r\n   expense_date date not null default current_date,\r\n+  status expense_status not null default 'paid',\r\n   description text,\r\n   created_at timestamptz default now()\r\n );\r\n \r\n+create table if not exists public.loans (\r\n+  id uuid primary key default gen_random_uuid(),\r\n+  lender_name text not null,\r\n+  initial_amount numeric not null,\r\n+  current_balance numeric not null,\r\n+  interest_rate_pa numeric,\r\n+  created_at timestamptz default now(),\r\n+  updated_at timestamptz default now()\r\n+);\r\n+\r\n+create table if not exists public.loan_transactions (\r\n+  id uuid primary key default gen_random_uuid(),\r\n+  loan_id uuid not null references public.loans on delete cascade,\r\n+  date timestamptz not null default now(),\r\n+  type loan_transaction_type not null,\r\n+  amount numeric not null,\r\n+  created_at timestamptz default now()\r\n+);\r\n+\r\n create or replace function public.calculate_next_refill_date(last_order_liters numeric, household family_size)\r\n returns date as $$\r\n declare\r\n   monthly_consumption numeric;\r\n@@ -183,16 +205,54 @@\n create trigger trg_orders_delivery\r\n after insert or update on public.orders\r\n for each row execute function public.handle_order_delivery();\r\n \r\n+create trigger trg_loans_updated\r\n+before update on public.loans\r\n+for each row execute function public.touch_updated_at();\r\n+\r\n+create or replace function public.get_bulk_oil_cost_per_liter()\r\n+returns numeric as $$\r\n+declare\r\n+  total_production_expenses numeric;\r\n+  total_groundnut_expenses numeric;\r\n+  total_oil_liters numeric;\r\n+  bulk_cost numeric;\r\n+begin\r\n+  select coalesce(sum(amount), 0)\r\n+  into total_production_expenses\r\n+  from public.expenses\r\n+  where expense_type in ('labor', 'utilities', 'maintenance');\r\n+\r\n+  select coalesce(sum(amount), 0)\r\n+  into total_groundnut_expenses\r\n+  from public.expenses\r\n+  where expense_type = 'purchase_groundnuts';\r\n+\r\n+  select coalesce(sum(output_oil_liters), 0)\r\n+  into total_oil_liters\r\n+  from public.production_batches\r\n+  where output_oil_liters is not null and output_oil_liters > 0;\r\n+\r\n+  if total_oil_liters = 0 then\r\n+    return 0;\r\n+  end if;\r\n+\r\n+  bulk_cost := (total_production_expenses + total_groundnut_expenses) / total_oil_liters;\r\n+  return bulk_cost;\r\n+end;\r\n+$$ language plpgsql stable;\r\n+\r\n alter table public.inventory_items enable row level security;\r\n alter table public.customers enable row level security;\r\n alter table public.customer_status_history enable row level security;\r\n alter table public.production_batches enable row level security;\r\n alter table public.orders enable row level security;\r\n alter table public.order_items enable row level security;\r\n alter table public.delivery_assignments enable row level security;\r\n alter table public.expenses enable row level security;\r\n+alter table public.loans enable row level security;\r\n+alter table public.loan_transactions enable row level security;\r\n alter table public.profiles enable row level security;\r\n \r\n create policy \"super admin manage inventory\"\r\n   on public.inventory_items\r\n@@ -322,13 +382,33 @@\n   ) with check (\r\n     exists (select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin')\r\n   );\r\n \r\n+create policy \"super admin loans\"\r\n+  on public.loans\r\n+  for all using (\r\n+    exists (select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin')\r\n+  ) with check (\r\n+    exists (select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin')\r\n+  );\r\n+\r\n+create policy \"super admin loan transactions\"\r\n+  on public.loan_transactions\r\n+  for all using (\r\n+    exists (select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin')\r\n+  ) with check (\r\n+    exists (select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin')\r\n+  );\r\n+\r\n insert into public.inventory_items (id, item_name, item_type, stock_level, unit, avg_cost, low_stock_threshold)\r\n values\r\n   ('b6b8b286-8cf7-4d05-b1e8-1ca5d7ccf111', 'Groundnuts', 'raw_material', 920, 'kg', 78, 600),\r\n   ('f59fe2de-0c61-4d8f-9701-c074f4080bcf', '1L Bottle Oil', 'finished_good', 140, 'units', 260, 100),\r\n-  ('3d6b31d8-29ad-4ca1-b221-9c14b53627f7', 'Oilcake', 'byproduct', 240, 'kg', 32, 100)\r\n+  ('3d6b31d8-29ad-4ca1-b221-9c14b53627f7', 'Oilcake', 'byproduct', 240, 'kg', 32, 100),\r\n+  ('e8f1c2d3-5a6b-4c7d-8e9f-0a1b2c3d4e5f', 'Empty 1L Bottle', 'packaging', 260, 'units', 18, 200),\r\n+  ('f9e2d3c4-6b7a-5d8e-9f0a-1b2c3d4e5f6a', 'Empty 5L Tin', 'packaging', 80, 'units', 65, 50),\r\n+  ('a0b1c2d3-7c8b-6e9d-0f1a-2b3c4d5e6f7a', 'Empty 15L Tin', 'packaging', 25, 'units', 180, 20),\r\n+  ('b1c2d3e4-8d9c-7f0e-1a2b-3c4d5e6f7g8h', 'Labels', 'packaging', 520, 'units', 4, 400)\r\n ON CONFLICT (id) DO NOTHING;\r\n \r\n insert into public.customers (id, name, phone, address, family_size, status, last_interaction_at, next_refill_date)\r\n values\r\n"
                },
                {
                    "date": 1763364745360,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,17 +62,16 @@\n \r\n create table if not exists public.production_batches (\r\n   id uuid primary key default gen_random_uuid(),\r\n   batch_code text not null unique,\r\n-  phase text not null check (phase in ('dehusking', 'pressing', 'bottling')),\r\n+  phase text not null check (phase in ('dehusking', 'pressing', 'completed')),\r\n   farmer_name text,\r\n   batch_date date not null default current_date,\r\n   input_groundnuts_kg numeric,\r\n   output_peanuts_kg numeric,\r\n   output_oil_liters numeric,\r\n   output_oilcake_kg numeric,\r\n   output_husk_kg numeric,\r\n-  bottled_units integer,\r\n   notes text,\r\n   created_at timestamptz default now()\r\n );\r\n \r\n"
                },
                {
                    "date": 1763368600003,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,8 +38,16 @@\n   created_at timestamptz default now(),\r\n   updated_at timestamptz default now()\r\n );\r\n \r\n+create table if not exists public.stock_movements (\r\n+  id uuid primary key default gen_random_uuid(),\r\n+  item_id uuid not null references public.inventory_items(id) on delete cascade,\r\n+  quantity_change numeric not null,\r\n+  reason text,\r\n+  created_at timestamptz default now()\r\n+);\r\n+\r\n create table if not exists public.customers (\r\n   id uuid primary key default gen_random_uuid(),\r\n   name text not null,\r\n   phone text not null unique,\r\n@@ -192,8 +200,20 @@\n   return new;\r\n end;\r\n $$ language plpgsql;\r\n \r\n+create or replace function public.handle_stock_movement()\r\n+returns trigger as $$\r\n+begin\r\n+  update public.inventory_items\r\n+  set stock_level = stock_level + new.quantity_change,\r\n+      updated_at = now()\r\n+  where id = new.item_id;\r\n+  \r\n+  return new;\r\n+end;\r\n+$$ language plpgsql;\r\n+\r\n create trigger trg_orders_updated\r\n before update on public.orders\r\n for each row execute function public.touch_updated_at();\r\n \r\n@@ -208,8 +228,14 @@\n create trigger trg_loans_updated\r\n before update on public.loans\r\n for each row execute function public.touch_updated_at();\r\n \r\n+drop trigger if exists on_stock_movement on public.stock_movements;\r\n+\r\n+create trigger on_stock_movement\r\n+after insert on public.stock_movements\r\n+for each row execute function public.handle_stock_movement();\r\n+\r\n create or replace function public.get_bulk_oil_cost_per_liter()\r\n returns numeric as $$\r\n declare\r\n   total_production_expenses numeric;\r\n@@ -241,8 +267,9 @@\n end;\r\n $$ language plpgsql stable;\r\n \r\n alter table public.inventory_items enable row level security;\r\n+alter table public.stock_movements enable row level security;\r\n alter table public.customers enable row level security;\r\n alter table public.customer_status_history enable row level security;\r\n alter table public.production_batches enable row level security;\r\n alter table public.orders enable row level security;\r\n@@ -397,8 +424,16 @@\n   ) with check (\r\n     exists (select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin')\r\n   );\r\n \r\n+create policy \"super admin stock movements\"\r\n+  on public.stock_movements\r\n+  for all using (\r\n+    exists (select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin')\r\n+  ) with check (\r\n+    exists (select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin')\r\n+  );\r\n+\r\n insert into public.inventory_items (id, item_name, item_type, stock_level, unit, avg_cost, low_stock_threshold)\r\n values\r\n   ('b6b8b286-8cf7-4d05-b1e8-1ca5d7ccf111', 'Groundnuts', 'raw_material', 920, 'kg', 78, 600),\r\n   ('f59fe2de-0c61-4d8f-9701-c074f4080bcf', '1L Bottle Oil', 'finished_good', 140, 'units', 260, 100),\r\n"
                }
            ],
            "date": 1763069565219,
            "name": "Commit-0",
            "content": "create extension if not exists \"pgcrypto\";\r\n\r\ncreate type family_size as enum ('small', 'medium', 'large');\r\ncreate type lead_status as enum (\r\n  'inquiry',\r\n  'education',\r\n  'price_sent',\r\n  'trust_process',\r\n  'closed_won',\r\n  'feedback_pending',\r\n  'refill_due'\r\n);\r\ncreate type order_status as enum ('pending', 'processing', 'out_for_delivery', 'delivered');\r\ncreate type payment_status as enum ('cod', 'prepaid');\r\n\r\ncreate table if not exists public.profiles (\r\n  id uuid primary key references auth.users on delete cascade,\r\n  full_name text,\r\n  role text check (role in ('super_admin', 'delivery_agent')) default 'delivery_agent',\r\n  created_at timestamptz default now()\r\n);\r\n\r\ndefault privileges in schema public grant all on tables to postgres;\r\ndefault privileges in schema public grant usage, select on sequences to postgres;\r\n\r\ngrant usage on schema public to authenticated;\r\n\r\ncreate table if not exists public.inventory_items (\r\n  id uuid primary key default gen_random_uuid(),\r\n  item_name text not null,\r\n  item_type text not null check (item_type in ('raw_material', 'packaging', 'intermediate', 'finished_good', 'byproduct')),\r\n  stock_level numeric not null default 0,\r\n  unit text not null,\r\n  avg_cost numeric not null default 0,\r\n  low_stock_threshold numeric not null default 0,\r\n  created_at timestamptz default now(),\r\n  updated_at timestamptz default now()\r\n);\r\n\r\ncreate table if not exists public.customers (\r\n  id uuid primary key default gen_random_uuid(),\r\n  name text not null,\r\n  phone text not null unique,\r\n  address text not null,\r\n  family_size family_size not null,\r\n  status lead_status not null default 'inquiry',\r\n  last_interaction_at timestamptz default now(),\r\n  next_refill_date date,\r\n  created_at timestamptz default now(),\r\n  updated_at timestamptz default now()\r\n);\r\n\r\ncreate table if not exists public.customer_status_history (\r\n  id uuid primary key default gen_random_uuid(),\r\n  customer_id uuid not null references public.customers on delete cascade,\r\n  status lead_status not null,\r\n  changed_at timestamptz not null default now(),\r\n  notes text\r\n);\r\n\r\ncreate table if not exists public.production_batches (\r\n  id uuid primary key default gen_random_uuid(),\r\n  batch_code text not null unique,\r\n  phase text not null check (phase in ('dehusking', 'pressing', 'bottling')),\r\n  farmer_name text,\r\n  batch_date date not null default current_date,\r\n  input_groundnuts_kg numeric,\r\n  output_peanuts_kg numeric,\r\n  output_oil_liters numeric,\r\n  output_oilcake_kg numeric,\r\n  output_husk_kg numeric,\r\n  bottled_units integer,\r\n  notes text,\r\n  created_at timestamptz default now()\r\n);\r\n\r\ncreate table if not exists public.orders (\r\n  id uuid primary key default gen_random_uuid(),\r\n  customer_id uuid not null references public.customers on delete cascade,\r\n  status order_status not null default 'pending',\r\n  payment_status payment_status not null default 'prepaid',\r\n  total_amount numeric not null default 0,\r\n  total_liters numeric not null default 0,\r\n  assigned_agent uuid references public.profiles,\r\n  ordered_at timestamptz not null default now(),\r\n  delivered_at timestamptz,\r\n  created_at timestamptz default now(),\r\n  updated_at timestamptz default now()\r\n);\r\n\r\ncreate table if not exists public.order_items (\r\n  id uuid primary key default gen_random_uuid(),\r\n  order_id uuid not null references public.orders on delete cascade,\r\n  product_id uuid references public.inventory_items on delete set null,\r\n  product_name text not null,\r\n  quantity numeric not null,\r\n  unit_price numeric not null,\r\n  created_at timestamptz default now()\r\n);\r\n\r\ncreate table if not exists public.delivery_assignments (\r\n  id uuid primary key default gen_random_uuid(),\r\n  order_id uuid not null references public.orders on delete cascade,\r\n  delivery_agent_id uuid not null references public.profiles on delete cascade,\r\n  scheduled_for timestamptz not null,\r\n  created_at timestamptz default now()\r\n);\r\n\r\ncreate table if not exists public.expenses (\r\n  id uuid primary key default gen_random_uuid(),\r\n  expense_type text not null check (expense_type in ('purchase_groundnuts', 'transport', 'labor', 'maintenance', 'utilities')),\r\n  amount numeric not null,\r\n  expense_date date not null default current_date,\r\n  description text,\r\n  created_at timestamptz default now()\r\n);\r\n\r\ncreate or replace function public.calculate_next_refill_date(last_order_liters numeric, household family_size)\r\nreturns date as $$\r\ndeclare\r\n  monthly_consumption numeric;\r\n  days_of_supply integer;\r\nbegin\r\n  if household = 'small' then\r\n    monthly_consumption := 1;\r\n  elsif household = 'large' then\r\n    monthly_consumption := 3;\r\n  else\r\n    monthly_consumption := 2;\r\n  end if;\r\n\r\n  if last_order_liters is null or last_order_liters <= 0 then\r\n    return null;\r\n  end if;\r\n\r\n  days_of_supply := greatest(ceil((last_order_liters / monthly_consumption) * 30), 7);\r\n  return current_date + days_of_supply;\r\nend;\r\n$$ language plpgsql stable;\r\n\r\ncreate or replace function public.handle_order_delivery()\r\nreturns trigger as $$\r\ndeclare\r\n  household family_size;\r\n  refill_date date;\r\nbegin\r\n  if new.status = 'delivered' and (tg_op = 'INSERT' or old.status <> 'delivered') then\r\n    select family_size into household from public.customers where id = new.customer_id;\r\n\r\n    if household is not null then\r\n      refill_date := public.calculate_next_refill_date(new.total_liters, household);\r\n      update public.customers\r\n      set status = 'feedback_pending',\r\n          next_refill_date = refill_date,\r\n          last_interaction_at = now(),\r\n          updated_at = now()\r\n      where id = new.customer_id;\r\n\r\n      insert into public.customer_status_history(customer_id, status, notes)\r\n      values (new.customer_id, 'feedback_pending', 'Order delivered - awaiting feedback');\r\n    end if;\r\n  end if;\r\n  return new;\r\nend;\r\n$$ language plpgsql;\r\n\r\ncreate or replace function public.touch_updated_at()\r\nreturns trigger as $$\r\nbegin\r\n  new.updated_at = now();\r\n  return new;\r\nend;\r\n$$ language plpgsql;\r\n\r\ncreate trigger trg_orders_updated\r\nbefore update on public.orders\r\nfor each row execute function public.touch_updated_at();\r\n\r\ncreate trigger trg_customers_updated\r\nbefore update on public.customers\r\nfor each row execute function public.touch_updated_at();\r\n\r\ncreate trigger trg_orders_delivery\r\nafter insert or update on public.orders\r\nfor each row execute function public.handle_order_delivery();\r\n\r\nalter table public.inventory_items enable row level security;\r\nalter table public.customers enable row level security;\r\nalter table public.customer_status_history enable row level security;\r\nalter table public.production_batches enable row level security;\r\nalter table public.orders enable row level security;\r\nalter table public.order_items enable row level security;\r\nalter table public.delivery_assignments enable row level security;\r\nalter table public.expenses enable row level security;\r\nalter table public.profiles enable row level security;\r\n\r\ncreate policy \"super admin manage inventory\"\r\n  on public.inventory_items\r\n  for all using (\r\n    exists (\r\n      select 1\r\n      from public.profiles p\r\n      where p.id = auth.uid() and p.role = 'super_admin'\r\n    )\r\n  ) with check (\r\n    exists (\r\n      select 1\r\n      from public.profiles p\r\n      where p.id = auth.uid() and p.role = 'super_admin'\r\n    )\r\n  );\r\n\r\ncreate policy \"super admin manage customers\"\r\n  on public.customers\r\n  for all using (\r\n    exists (\r\n      select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin'\r\n    )\r\n  ) with check (\r\n    exists (\r\n      select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin'\r\n    )\r\n  );\r\n\r\ncreate policy \"super admin manage orders\"\r\n  on public.orders\r\n  for all using (\r\n    exists (\r\n      select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin'\r\n    )\r\n  ) with check (\r\n    exists (\r\n      select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin'\r\n    )\r\n  );\r\n\r\ncreate policy \"delivery agent view own orders\"\r\n  on public.orders\r\n  for select using (\r\n    exists (\r\n      select 1\r\n      from public.profiles p\r\n      where p.id = auth.uid() and p.role = 'delivery_agent'\r\n    )\r\n    and assigned_agent = auth.uid()\r\n  );\r\n\r\ncreate policy \"delivery agent update delivery status\"\r\n  on public.orders\r\n  for update using (\r\n    exists (\r\n      select 1\r\n      from public.profiles p\r\n      where p.id = auth.uid() and p.role = 'delivery_agent'\r\n    )\r\n    and assigned_agent = auth.uid()\r\n  ) with check (status = 'delivered');\r\n\r\ncreate policy \"restrict customer history to admin\"\r\n  on public.customer_status_history\r\n  for select using (\r\n    exists (\r\n      select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin'\r\n    )\r\n  );\r\n\r\ncreate policy \"delivery agent assignments\"\r\n  on public.delivery_assignments\r\n  for select using (\r\n    exists (\r\n      select 1\r\n      from public.profiles p\r\n      where p.id = auth.uid() and p.role = 'delivery_agent'\r\n    )\r\n    and delivery_agent_id = auth.uid()\r\n  );\r\n\r\ncreate policy \"super admin assignments\"\r\n  on public.delivery_assignments\r\n  for all using (\r\n    exists (\r\n      select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin'\r\n    )\r\n  ) with check (\r\n    exists (\r\n      select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin'\r\n    )\r\n  );\r\n\r\ncreate policy \"super admin expenses\"\r\n  on public.expenses\r\n  for all using (\r\n    exists (\r\n      select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin'\r\n    )\r\n  ) with check (\r\n    exists (\r\n      select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin'\r\n    )\r\n  );\r\n\r\ncreate policy \"super admin production\"\r\n  on public.production_batches\r\n  for all using (\r\n    exists (\r\n      select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin'\r\n    )\r\n  ) with check (\r\n    exists (\r\n      select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin'\r\n    )\r\n  );\r\n\r\ncreate policy \"profiles self\"\r\n  on public.profiles\r\n  for select using (auth.uid() = id);\r\n\r\ncreate policy \"profiles admin\"\r\n  on public.profiles\r\n  for all using (\r\n    exists (select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin')\r\n  ) with check (\r\n    exists (select 1 from public.profiles p where p.id = auth.uid() and p.role = 'super_admin')\r\n  );\r\n\r\ninsert into public.inventory_items (id, item_name, item_type, stock_level, unit, avg_cost, low_stock_threshold)\r\nvalues\r\n  ('b6b8b286-8cf7-4d05-b1e8-1ca5d7ccf111', 'Groundnuts', 'raw_material', 920, 'kg', 78, 600),\r\n  ('f59fe2de-0c61-4d8f-9701-c074f4080bcf', '1L Bottle Oil', 'finished_good', 140, 'units', 260, 100),\r\n  ('3d6b31d8-29ad-4ca1-b221-9c14b53627f7', 'Oilcake', 'byproduct', 240, 'kg', 32, 100)\r\nON CONFLICT (id) DO NOTHING;\r\n\r\ninsert into public.customers (id, name, phone, address, family_size, status, last_interaction_at, next_refill_date)\r\nvalues\r\n  ('1b4bee8c-81c7-4f50-a32f-8eec127c2e10', 'Anita Rao', '+91 99001 11223', 'HSR Layout, Bengaluru', 'medium', 'price_sent', now() - interval '26 hours', current_date + 12),\r\n  ('a73bbad8-855a-4f67-b0f1-4e9a784889d8', 'Vishal Sharma', '+91 98450 22334', 'Whitefield, Bengaluru', 'large', 'inquiry', now() - interval '3 hours', null),\r\n  ('e2f39f48-0d40-4c77-a5b4-623d001a6c23', 'Deepa Natarajan', '+91 99867 44556', 'Koramangala, Bengaluru', 'small', 'refill_due', now() - interval '18 days', current_date + 2)\r\nON CONFLICT (id) DO NOTHING;\r\n\r\ninsert into public.expenses (id, expense_type, amount, expense_date, description)\r\nvalues\r\n  ('a4e8a0a6-ec7b-4dc3-93de-50f8745bf2fe', 'purchase_groundnuts', 102000, current_date - 2, 'Bulk procurement from Gowda Farms (1.2T)'),\r\n  ('0b9d3a60-3572-4665-97ce-25c418dcb704', 'transport', 8500, current_date - 2, 'Inbound logistics'),\r\n  ('bc2a82aa-59c5-45f6-bd24-6e7c56bdd1e5', 'labor', 6200, current_date - 1, 'Pressing crew payouts')\r\nON CONFLICT (id) DO NOTHING;\r\n\r\ninsert into public.profiles (id, full_name, role)\r\nvalues\r\n  ('8d0b9e80-671b-4d0f-9e5c-d7c2b6d6a111', 'Founder Admin', 'super_admin'),\r\n  ('f60216f4-9cb0-4915-9d00-5389d02b8c21', 'Aditya Shetty', 'delivery_agent')\r\nON CONFLICT (id) DO NOTHING;\r\n\r\ninsert into public.orders (id, customer_id, status, payment_status, total_amount, total_liters, assigned_agent, ordered_at, delivered_at)\r\nvalues\r\n  ('bf8d85da-38b7-4c2d-a6cc-d0c6eefd3f82', '1b4bee8c-81c7-4f50-a32f-8eec127c2e10', 'out_for_delivery', 'prepaid', 520, 2, 'f60216f4-9cb0-4915-9d00-5389d02b8c21', now() - interval '5 hours', null),\r\n  ('70c24885-887d-4f3b-9ce0-1aa569f902fb', 'e2f39f48-0d40-4c77-a5b4-623d001a6c23', 'delivered', 'cod', 1150, 5, 'f60216f4-9cb0-4915-9d00-5389d02b8c21', now() - interval '7 days', now() - interval '5 days')\r\nON CONFLICT (id) DO NOTHING;\r\n\r\ninsert into public.order_items (id, order_id, product_id, product_name, quantity, unit_price)\r\nvalues\r\n  ('c7e7a555-267d-4270-b478-1d1df2b56ba2', 'bf8d85da-38b7-4c2d-a6cc-d0c6eefd3f82', 'f59fe2de-0c61-4d8f-9701-c074f4080bcf', '1L Bottle Oil', 2, 260),\r\n  ('427f3f5c-36bf-41e5-a3fa-b31c3d650eba', '70c24885-887d-4f3b-9ce0-1aa569f902fb', 'f59fe2de-0c61-4d8f-9701-c074f4080bcf', '1L Bottle Oil', 2, 260)\r\nON CONFLICT (id) DO NOTHING;\r\n\r\ninsert into public.delivery_assignments (id, order_id, delivery_agent_id, scheduled_for)\r\nvalues\r\n  ('a27b0d52-9ee4-4b93-95ef-5656d87f2622', 'bf8d85da-38b7-4c2d-a6cc-d0c6eefd3f82', 'f60216f4-9cb0-4915-9d00-5389d02b8c21', now())\r\nON CONFLICT (id) DO NOTHING;\r\n"
        }
    ]
}