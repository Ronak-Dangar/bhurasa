{
    "sourceFile": "supabase/create-admin-profile.sql",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1763151636669,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1763290624037,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,26 +1,34 @@\n--- Check if you have any users and their profiles\r\n+-- Step 1: Check if you have any users and their profiles\r\n SELECT \r\n   u.id,\r\n   u.email,\r\n+  u.created_at,\r\n   p.role,\r\n   p.full_name\r\n FROM auth.users u\r\n LEFT JOIN public.profiles p ON u.id = p.id\r\n ORDER BY u.created_at DESC;\r\n \r\n--- If you see your user but no profile, create one:\r\n--- Replace 'YOUR_USER_ID_HERE' with the actual UUID from the query above\r\n+-- Step 2: If you see your user but no profile row, create one\r\n -- Replace 'your-email@example.com' with your actual email\r\n \r\n--- Example: Create a super_admin profile\r\n+-- Create a super_admin profile:\r\n+INSERT INTO public.profiles (id, full_name, role)\r\n+VALUES (\r\n+  (SELECT id FROM auth.users WHERE email = 'your-email@example.com' LIMIT 1),\r\n+  'Super Admin',\r\n+  'super_admin'\r\n+)\r\n+ON CONFLICT (id) DO UPDATE \r\n+SET role = 'super_admin';\r\n+\r\n+-- Or if you already have the user ID:\r\n -- INSERT INTO public.profiles (id, full_name, role)\r\n -- VALUES (\r\n---   (SELECT id FROM auth.users WHERE email = 'your-email@example.com'),\r\n---   'Admin User',\r\n+--   'YOUR_USER_UUID_HERE',\r\n+--   'Super Admin',\r\n --   'super_admin'\r\n--- );\r\n+-- )\r\n+-- ON CONFLICT (id) DO UPDATE \r\n+-- SET role = 'super_admin';\r\n \r\n--- Or update an existing profile to super_admin:\r\n--- UPDATE public.profiles \r\n--- SET role = 'super_admin'\r\n--- WHERE id = (SELECT id FROM auth.users WHERE email = 'your-email@example.com');\r\n"
                }
            ],
            "date": 1763151636669,
            "name": "Commit-0",
            "content": "-- Check if you have any users and their profiles\r\nSELECT \r\n  u.id,\r\n  u.email,\r\n  p.role,\r\n  p.full_name\r\nFROM auth.users u\r\nLEFT JOIN public.profiles p ON u.id = p.id\r\nORDER BY u.created_at DESC;\r\n\r\n-- If you see your user but no profile, create one:\r\n-- Replace 'YOUR_USER_ID_HERE' with the actual UUID from the query above\r\n-- Replace 'your-email@example.com' with your actual email\r\n\r\n-- Example: Create a super_admin profile\r\n-- INSERT INTO public.profiles (id, full_name, role)\r\n-- VALUES (\r\n--   (SELECT id FROM auth.users WHERE email = 'your-email@example.com'),\r\n--   'Admin User',\r\n--   'super_admin'\r\n-- );\r\n\r\n-- Or update an existing profile to super_admin:\r\n-- UPDATE public.profiles \r\n-- SET role = 'super_admin'\r\n-- WHERE id = (SELECT id FROM auth.users WHERE email = 'your-email@example.com');\r\n"
        }
    ]
}